@prefix doap:  <http://usefulinc.com/ns/doap#> .
@prefix lv2:   <http://lv2plug.in/ns/lv2core#> .
@prefix rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#> .
@prefix units: <http://lv2plug.in/ns/extensions/units#> .
@prefix urid:    <http://lv2plug.in/ns/ext/urid#> .
@prefix atom:   <http://lv2plug.in/ns/ext/atom#> .
@prefix midi:  <http://lv2plug.in/ns/ext/midi#> .
@prefix epp:     <http://lv2plug.in/ns/ext/port-props#> .
@prefix uiext:   <http://lv2plug.in/ns/extensions/ui#> .
@prefix idpy:  <http://harrisonconsoles.com/lv2/inlinedisplay#> .
@prefix foaf:  <http://xmlns.com/foaf/0.1/> .
@prefix mod:   <http://moddevices.com/ns/mod#> .
@prefix param:   <http://lv2plug.in/ns/ext/parameters#> .
@prefix work:  <http://lv2plug.in/ns/ext/worker#> .
@prefix pg:      <http://lv2plug.in/ns/ext/port-groups#> .
@prefix pipedal_ui: <http://github.com/rerdavies/pipedal/ui#> .
@prefix ui: <http://lv2plug.in/ns/extensions/ui#> .

@prefix atom: <http://lv2plug.in/ns/ext/atom#> .
@prefix patch: <http://lv2plug.in/ns/ext/patch#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix state: <http://lv2plug.in/ns/ext/state#> .
@prefix urid: <http://lv2plug.in/ns/ext/urid#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix mod: <http://moddevices.com/ns/mod#>.

@prefix toobcrs: <http://two-play.com/plugins/toob-convolution-reverb-stereo#> .
@prefix toobimpulse: <http://two-play.com/plugins/toob-impulse#> .
                      
toobimpulse:impulseFile
        a lv2:Parameter;
        rdfs:label "File";
        mod:fileTypes "ir,wav,flac";
        rdfs:range atom:Path.


<http://two-play.com/rerdavies#me>
	a foaf:Person ;
	foaf:name "Robin Davies" ;
	foaf:mbox <mailto:rerdavies@gmail.com> ;
	foaf:homepage <https://github.com/sponsors/rerdavies> .

<http://two-play.com/plugins/toob-convolution-reverb-stereo>
        a lv2:Plugin ,
                lv2:ReverbPlugin ;
        doap:name "TooB Convolution Reverb (Stereo)" ,
                "TooB Convolution Reverb (Stereo)"@en-gb 
                ;
        uiext:ui <http://two-play.com/plugins/convolution-reverb-stereo-ui> ;
        doap:license <https://rerdavies.github.io/pipedal/LicenseToobAmp> ;
        doap:maintainer <http://two-play.com/rerdavies#me> ;
         lv2:minorVersion 0 ;
        lv2:microVersion 72 ;
        rdfs:comment """


Toob Convolution Reverb Stereo uses convolution reverb impulse/response files in order to produce highly 
realistic reverb effects.

Convolution reverb impules/response (i/r) files are (typically) generated by recording the reverberant response of real 
spaces (concert halls, churches, clubs, &c) in response to an impulse signal. Originally, the impulse signal was a shot 
fired by a starter pistol; however modern i/r production often uses more complex impulse signals and complex digital signal 
processing to generate more accurate i/r files. When that recording is convolved with an input signal, it produces a faithful 
recreation of the sound of the room in which the i/r file was recorded. It is also possible to generate i/r files 
that recreate the sound of reverb and echo effect pedals/studio effects, using the same technique. Convolution reverbs
can also be used to recreate the sound of classic spring reverbs.

Toob Convolution Reverb comes with a nominal set of reverb impulse files to get you started. However, these i/r files 
are not neccesarily ideally suited for use as reverbs in a guitar pedalboard. You are strongly encouraged to 
explore the rich collections of reverb impulse files (both free and commercially produced) that are available on the internet. 

The Stretch and Decay controls allow you to manipulate source i/r files in order create reverb effects that meet your exact requirements. The Stretch 
control resamples the source i/r file in order to make the reverb effect sound longer or shorter. The Decay control applies an exponential 
decay envelope to the source i/r file. Negative values make the reverb tail quieter; positive values apply a negative decay envelope. 
i.e. when the Decay control is set to a positive value, it makes the reverb tail louder. 

TooB Convolution reverb can uses mono or stereo i/r files. If the impulse file has 4 channels, Toob Convolution Reverb assumes the file is in Ambisonic b-format, and down-mixes the ambisonic channels to stereo. 
To generate monophonic reverb effects from ambisonic audio, use the monophonic version of this plugin.

Special thanks are extended to the the OpenAir project, which graciously provided the base set of impulse files
distributed with Toob Convolution Reverb under licensing terms that are compatible with the Toob Amp project's
licensing terms.

---

Toob Convolution Reverb's impulse files were provided by the OpenAir project 
(https://www.openair.hosted.york.ac.uk) under CC-By-4.0 licenses. 

See the full text of the Creative Commons Attribution 4.0 International License given below for Disclaimers of Warrantees and 
Limitations of Liability that apply to these works.

##### Arthur Sykes Rymer Auditorium.wav

Copyright © www.openairlib.net, University of York

This work is provided under a Creative Commons Attribution 4.0 International License.

https://creativecommons.org/licenses/by/4.0/

Source: https://www.openair.hosted.york.ac.uk/?page_id=425


##### Jack Lyons Hall, University of York.wav

Copyright © www.openairlib.net, Audiolab University of York, Alex Duffell, Aishwarya Sridhar, Zhong Li

This work is provided under a Creative Commons Attribution 4.0 International License.

https://creativecommons.org/licenses/by/4.0/

Source: https://www.openair.hosted.york.ac.uk/?page_id=571



##### Koli National Park - Winter.wav

Copyright © www.openairlib.net, Audio Lab University of York, Andrew Chadwick, Simon Shelley

This work is provided under a Creative Commons Attribution 4.0 International License.

https://creativecommons.org/licenses/by/4.0/

Source: https://www.openair.hosted.york.ac.uk/?page_id=584



##### St. Margaret’s Church.wav

Copyright © www.openairlib.net, AudioLab University of York, www.ncem.co.uk

This work is provided under a Creative Commons Attribution 4.0 International License.

https://creativecommons.org/licenses/by/4.0/

Source: https://www.openair.hosted.york.ac.uk/?page_id=702


##### Genesis 6 Studio Live Room.wav

Copyright © www.openairlib.net

This work is provided under a Creative Commons Attribution 4.0 International License.

https://creativecommons.org/licenses/by/4.0/

Source: https://www.openair.hosted.york.ac.uk/?page_id=483

""" ;

        mod:brand "TooB";
        mod:label "TooB CReverb Stereo";
        lv2:requiredFeature urid:map;
        lv2:optionalFeature state::freePath, state:makePath, state:mapPath, work:schedule ;
        lv2:extensionData state:interface;


        lv2:optionalFeature lv2:hardRTCapable;

        pg:mainInput toobcrs:mainIn ;
	pg:mainOutput toobcrs:mainOut ;

        patch:readable 
                toobimpulse:impulseFile
                ;
        patch:writable 
                toobimpulse:impulseFile
                ;
        lv2:extensionData state:interface,
                work:interface;

        lv2:port
        [
            a lv2:InputPort ,
                lv2:ControlPort ;
            lv2:index 0 ;
            lv2:symbol "bypass" ;
            lv2:name "Bypass" ;
            lv2:default 1.0 ;
            lv2:minimum 0.0 ;
            lv2:maximum 1.0 ;
            lv2:designation lv2:enabled;
            lv2:portProperty lv2:toggled;
        ],
        [
                a lv2:InputPort ,
                lv2:ControlPort ;

                lv2:index  1;
                lv2:symbol "time" ;
                lv2:name "Max T";
                lv2:portProperty epp:logarithmic;

                lv2:default 30.0 ;
                lv2:minimum 0.1 ;
                lv2:maximum 30.0 ;

                lv2:portProperty epp:notAutomatic, epp:notOnGUI ;
                lv2:portProperty epp:expensive ;

                units:unit units:s ;

                rdfs:comment "Maximum length of impulse data to use." ;

        ],
        [
                a lv2:InputPort ,
                lv2:ControlPort ;

                lv2:index  2;
                lv2:symbol "direct_mix" ;
                lv2:name "Direct";
                lv2:default -6.0 ;
                lv2:minimum -40.0 ;
                lv2:maximum 40.0 ;
                units:unit units:db ;

                lv2:scalePoint [
                        rdfs:label "-INF" ;
                        rdf:value -40.0
                ];
                rdfs:comment "Direct mix. Set to minimum to disable." ;

        ],
        [
                a lv2:InputPort ,
                lv2:ControlPort ;

                lv2:index 3 ;
                lv2:symbol "reverb_mix" ;
                lv2:name "Reverb";

                lv2:default 0.0 ;
                lv2:minimum -40.0 ;
                lv2:maximum 40.0 ;
                units:unit units:db ;

                lv2:scalePoint [
                        rdfs:label "-INF" ;
                        rdf:value -40.0
                ];
                rdfs:comment "Reverb mix. Set to minimum to disable." ;
        ],
        [
                a lv2:InputPort ,
                lv2:ControlPort ;

                lv2:index 4 ;
                lv2:symbol "width" ;
                lv2:name "Width";

                lv2:default 1.0 ;
                lv2:minimum 0.0 ;
                lv2:maximum 1.0 ;    

                rdfs:comment "Stereo image width." ;
        ],  
        [
                a lv2:InputPort ,
                lv2:ControlPort ;

                lv2:portProperty epp:notOnGUI;  # doens't produce convincing stereo imaging.
                lv2:index 5 ;
                lv2:symbol "pan" ;
                lv2:name "Pan";

                lv2:default 0.0 ;
                lv2:minimum -1.0 ;
                lv2:maximum 1.0 ;    

                rdfs:comment "Pan." ;
        ],  
        [
                a lv2:InputPort ,
                lv2:ControlPort ;

                lv2:index 6 ;
                lv2:symbol "predelay" ; #obsolete!
                lv2:name "Predelay";

                lv2:default -1 ; # -1 => CrvbVersion::V2, else CrvbVersion::V1
                lv2:minimum -1 ;
                lv2:maximum 1 ;
                
                
                lv2:portProperty lv2:enumeration, epp:notOnGUI ;

                lv2:scalePoint [
                        rdfs:label "Remove" ;
                        rdf:value 0.0;
                ],
                [
                        rdfs:label "Keep" ;
                        rdf:value 1.0;
                ];
                rdfs:comment "Removes leading silence in impulse when set to false." ;
        ],  

        [
                a lv2:InputPort ,
                lv2:ControlPort ;

                lv2:index 7 ;
                lv2:symbol "predelay_new" ;
                lv2:name "Predelay";

                lv2:default 1 ;
                lv2:minimum 1;
                lv2:maximum 300 ;
                
                units:unit units:ms ;
                lv2:portProperty  epp:logarithmic;
                lv2:scalePoint [
                        rdfs:label "0.00ms" ;
                        rdf:value 1;
                ];
                rdfs:comment "Delay first early reflection" ;
        ],  
        [
                a lv2:InputPort ,
                lv2:ControlPort ;

                lv2:index 8 ;
                lv2:symbol "stretch" ;
                lv2:name "Stretch";

                lv2:default 1 ;
                lv2:minimum 0.25;
                lv2:maximum 2 ;
                
                lv2:portProperty epp:logarithmic;


                rdfs:comment "Stretch the source i/r file" ;
        ],  
        [
                a lv2:InputPort ,
                lv2:ControlPort ;

                lv2:index 9 ;
                lv2:symbol "decay" ;
                lv2:name "Decay";

                lv2:default 0 ;
                lv2:minimum -1.0;
                lv2:maximum 1.0 ;
                

                rdfs:comment "Apply a decay envelope to the source i/r file" ;
        ],  
        [
                a lv2:InputPort ,
                lv2:ControlPort ;

                lv2:index 10 ;
                lv2:symbol "tails" ;
                lv2:name "Tails";

                lv2:default 1 ;
                lv2:minimum 0;
                lv2:maximum 1 ;
                lv2:portProperty lv2:toggled ;

                rdfs:comment "Reverb tails when bypassed" ;
        ],  



        [
                a lv2:OutputPort ,
                lv2:ControlPort ;

                lv2:index 11 ;
                lv2:symbol "loading_state" ;
                lv2:name "Status";

                lv2:portProperty lv2:enumeration ;
                lv2:default 0.0 ;
                lv2:minimum 0.0 ;
                lv2:maximum 5.0 ;

				# NotLoaded = 0,
				# Idle = 1,
				# Error = 2,
				# SentRequest = 3,
				# GotResponse = 4,
				# CleaningUp = 5,

                lv2:scalePoint [
                        rdfs:label "Not loaded" ;
                        rdf:value 0.0
                ],[
                        rdfs:label "Ready" ;
                        rdf:value 1.0
                ],[
                        rdfs:label "Error" ;
                        rdf:value 2.0
                ],[
                        rdfs:label "Loading" ;
                        rdf:value 3.0
                ],[
                        rdfs:label "Loading" ;
                        rdf:value 4.0
                ],[
                        rdfs:label "Loading" ;
                        rdf:value 5.0
                ];
                rdfs:comment "Plugin status." ;
        ],  
        [
                a lv2:AudioPort ,
                        lv2:InputPort ;
                lv2:index 12;
                lv2:symbol "inL" ;
                lv2:name "InL" ;
                lv2:designation pg:left ;
                pg:group toobcrs:mainIn


        ],
        [
                a lv2:AudioPort ,
                        lv2:InputPort ;
                lv2:index 13 ;
                lv2:symbol "inR" ;
                lv2:name "InR" ;
                lv2:designation pg:right ;
                pg:group toobcrs:mainIn;
        ],
        [
                a lv2:AudioPort ,
                        lv2:OutputPort ;
                lv2:index 14 ;
                lv2:symbol "outL" ;
                lv2:name "OutL" ;
                lv2:designation pg:left ;
                pg:group toobcrs:mainOut;
        ],
        [
                a lv2:AudioPort ,
                        lv2:OutputPort ;
                lv2:index 15 ;
                lv2:symbol "outR" ;
                lv2:name "OutR" ;
                lv2:designation pg:right ;
                pg:group toobcrs:mainOut;
        ],
        [
                a atom:AtomPort ,
                  lv2:InputPort;
                atom:bufferType atom:Sequence ;
                # atom:supports patch:Message;
                lv2:designation lv2:control ;
                atom:supports patch:Message ;

                lv2:index 16 ;
                lv2:symbol "control" ;
                lv2:name "Control" ;
                rdfs:comment "Control" ;
        ] , [
                a atom:AtomPort ,
                  lv2:OutputPort ;
                atom:bufferType atom:Sequence ;
                # atom:supports patch:Message;
                lv2:designation lv2:control ;
                lv2:index 17;
                lv2:symbol "notify" ;
                lv2:name "Notify" ;
                rdfs:comment "Notification" ;
        ]
        .

<http://two-play.com/plugins/toob-convolution-reverb-stereo>  pipedal_ui:ui toobcrs:ui .

toobcrs:ui 
        a pipedal_ui:ui ;
        pipedal_ui:fileProperties 
        [
                a pipedal_ui:fileProperty;
                rdfs:label "Reverb Impulse File" ;
                lv2:index 3 ;
                pipedal_ui:patchProperty toobimpulse:impulseFile ;
                pipedal_ui:directory "ReverbImpulseFiles";
                pipedal_ui:resourceDirectory "impulseFiles/reverb";
                pipedal_ui:fileTypes 
                [
                        a pipedal_ui:fileType;
                        rdfs:label "WAV files";
                        pipedal_ui:mimeType "audio/wav";
                ],
                [
                        a pipedal_ui:fileType;
                        rdfs:label "FLAC files";
                        pipedal_ui:mimeType "audio/flac";
                ]                ;
        ]
        .


<http://two-play.com/plugins/convolution-reverb-stereo-ui> 
    a  uiext:X11UI ;
    lv2:binary <ToobAmpUI.so>;

    lv2:extensionData uiext::idle ;
    lv2:extensionData uiext:resize ;
    lv2:extensionData uiext:idleInterface;
    lv2:requiredFeature uiext:idleInterface ;
    .
